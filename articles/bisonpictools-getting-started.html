<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Getting Started with bisonpictools • bisonpictools</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started with bisonpictools">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">bisonpictools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/bisonpic-methods.html">Analytic Methods for Estimating Wood Bison Ratios, Survival and Fecundity Rates, and Abundance</a></li>
    <li><a class="dropdown-item" href="../articles/bisonpictools-getting-started.html">Getting Started with bisonpictools</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/poissonconsulting/bisonpictools/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Getting Started with bisonpictools</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/poissonconsulting/bisonpictools/blob/main/vignettes/bisonpictools-getting-started.Rmd" class="external-link"><code>vignettes/bisonpictools-getting-started.Rmd</code></a></small>
      <div class="d-none name"><code>bisonpictools-getting-started.Rmd</code></div>
    </div>

    
    
<!-- Copyright 2023 Province of Alberta -->
<!-- Licensed under the Apache License, Version 2.0 (the "License"); -->
<!-- you may not use this file except in compliance with the License. -->
<!-- You may obtain a copy of the License at -->
<!-- http://www.apache.org/licenses/LICENSE-2.0 -->
<!-- Unless required by applicable law or agreed to in writing, software -->
<!-- distributed under the License is distributed on an "AS IS" BASIS, -->
<!-- WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. -->
<!-- See the License for the specific language governing permissions and -->
<!-- limitations under the License. -->
<p><code>bisonpictools</code> is an R package to facilitate the
visualization and analysis of camera trap data for wood bison herds. The
package includes functions to check the correct formatting of data,
visualize the data, manipulate and analyse the data using a complex
custom-built Bayesian model, and generate and plot predictions of
abundances, survival and fecundity rates, and population ratios.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>To install the latest development version of
<code>bisonpictools</code>, execute the following code in the RStudio
console.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"poissonconsulting/bisonpictools"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="bisonpic-suite">bisonpic Suite<a class="anchor" aria-label="anchor" href="#bisonpic-suite"></a>
</h2>
<p><code>bisonpictools</code> is part of the bisonpic suite of tools.
Other packages in this suite include:</p>
<ul>
<li><a href="https://github.com/poissonconsulting/shinybisonpic" class="external-link">shinybisonpic</a></li>
<li><a href="https://github.com/poissonconsulting/runbisonpic" class="external-link">runbisonpic</a></li>
</ul>
</div>
<div class="section level2">
<h2 id="getting-help">Getting Help<a class="anchor" aria-label="anchor" href="#getting-help"></a>
</h2>
<p>To get additional information on a particular function just type
<code>?</code> followed by the name of the function in the R console.
For example, <code>?bpt_analyse()</code> brings up the R documentation
for the <code>bisonpictools</code> analysis function.</p>
<p>For more information on using R the reader is referred to <a href="https://r4ds.had.co.nz/" class="external-link">R for Data Science</a> <span class="citation">(Wickham and Grolemund 2016)</span>.</p>
<p>If you discover a bug in <code>bisonpictools</code> please file an <a href="https://github.com/poissonconsulting/bisonpictools/issues" class="external-link">issue</a>
with a <a href="https://reprex.tidyverse.org/" class="external-link">reprex</a> (reproducible
example).</p>
</div>
<div class="section level2">
<h2 id="data">Data<a class="anchor" aria-label="anchor" href="#data"></a>
</h2>
<p>The easiest way to prepare the data for use with the
<code>bisonpictools</code> functions is to download the templated excel
spreadsheet from the <a href="https://poissonconsulting.shinyapps.io/shinybisonpic/" class="external-link">shinybisonpic
website</a>. Click the <strong>Download Template</strong> button, and
populate each sheet with your data.</p>
<ul>
<li>
<code>event_data</code> contains the camera trap event data,
including the date and time of each event, location of the camera trap,
and the number of individuals in each class</li>
<li>
<code>location_data</code> contains the coordinates of the camera
traps</li>
<li>
<code>census_data</code> contains population estimates of the
population from aerial surveys, and the date of the surveys
<ul>
<li>specifically, this should be an estimate of the entire population
size, not a minimum count</li>
</ul>
</li>
<li>
<code>proportion_calf_data</code> contains estimates of the
proportion of calves in the population from aerial surveys, and the date
of the surveys</li>
</ul>
</div>
<div class="section level2">
<h2 id="data-visualization">Data Visualization<a class="anchor" aria-label="anchor" href="#data-visualization"></a>
</h2>
<div class="section level3">
<h3 id="using-the-rstudio-console">Using the RStudio Console<a class="anchor" aria-label="anchor" href="#using-the-rstudio-console"></a>
</h3>
<p>Functions from <code>bisonpictools</code> can be run in the RStudio
console. The <code><a href="../reference/bpt_plot_ratios.html">bpt_plot_ratios()</a></code> function plots the ratios of
various sex-age classes over time. The user needs to provide the event
and location data, as well as vectors of classes to form the numerator
and denominator of the ratio.</p>
<div class="section level4">
<h4 id="read-in-data-from-the-populated-excel-template">(1) Read in data from the populated excel template<a class="anchor" aria-label="anchor" href="#read-in-data-from-the-populated-excel-template"></a>
</h4>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Change `dir` to the file path of the populated excel template on your computer</span></span>
<span><span class="va">dir</span> <span class="op">&lt;-</span> <span class="st">"myfilepath.xlsx"</span></span>
<span><span class="co"># Install readxl to read the excel spreadsheet into R</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"readxl"</span><span class="op">)</span></span>
<span><span class="co"># Read each sheet into R</span></span>
<span><span class="va">location_data</span> <span class="op">&lt;-</span> <span class="fu">readxl</span><span class="fu">::</span><span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html" class="external-link">read_xlsx</a></span><span class="op">(</span><span class="va">dir</span>, sheet <span class="op">=</span> <span class="st">"location"</span><span class="op">)</span></span>
<span><span class="va">event_data</span> <span class="op">&lt;-</span> <span class="fu">readxl</span><span class="fu">::</span><span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html" class="external-link">read_xlsx</a></span><span class="op">(</span><span class="va">dir</span>, sheet <span class="op">=</span> <span class="st">"event"</span><span class="op">)</span></span>
<span><span class="va">census_data</span> <span class="op">&lt;-</span> <span class="fu">readxl</span><span class="fu">::</span><span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html" class="external-link">read_xlsx</a></span><span class="op">(</span><span class="va">dir</span>, sheet <span class="op">=</span> <span class="st">"census"</span><span class="op">)</span></span>
<span><span class="va">proportion_calf_data</span> <span class="op">&lt;-</span> <span class="fu">readxl</span><span class="fu">::</span><span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html" class="external-link">read_xlsx</a></span><span class="op">(</span><span class="va">dir</span>, sheet <span class="op">=</span> <span class="st">"proportion_calf"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="produce-ratio-plots">(2) Produce ratio plots<a class="anchor" aria-label="anchor" href="#produce-ratio-plots"></a>
</h4>
<p>Data checks are completed before the analysis is run to ensure they
are in the correct format. In the plot, each point represents an event.
The size (area) of the point indicates the ratio while the opacity of
the point indicates the number of individuals in the group.</p>
<p>Note that a ratio value of “Inf” (infinity) indicates that the group
in a particular camera trap event has no individuals in the denominator
class. For example, if plotting the calf:cow ratio, a ratio value of
“Inf” would represent an event with one or more calves and no cows.
Similarly, a ratio of “0” indicates that the ratio in a particular
camera trap event has no individuals in the numerator class. For the
calf:cow ratio example, this would represent an event with one or more
cows and no calves.</p>
<p>For example, the female calf:male calf ratio plotted over all years
and locations from example data:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/poissonconsulting/bisonpictools" class="external-link">bisonpictools</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/bpt_plot_ratios.html">bpt_plot_ratios</a></span><span class="op">(</span></span>
<span>  <span class="va">event_data</span>,</span>
<span>  <span class="va">location_data</span>,</span>
<span>  numerator <span class="op">=</span> <span class="st">"f0"</span>,</span>
<span>  denominator <span class="op">=</span> <span class="st">"m0"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="bisonpictools-getting-started_files/figure-html/unnamed-chunk-4-1.png" width="768"></p>
<p>It is also possible to subset the data to include one or more camera
trap locations and/or study years:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/bpt_plot_ratios.html">bpt_plot_ratios</a></span><span class="op">(</span></span>
<span>  <span class="va">event_data</span>,</span>
<span>  <span class="va">location_data</span>,</span>
<span>  numerator <span class="op">=</span> <span class="st">"f0"</span>,</span>
<span>  denominator <span class="op">=</span> <span class="st">"m0"</span>,</span>
<span>  study_years <span class="op">=</span> <span class="st">"2019-2020"</span>,</span>
<span>  locations <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"LOCID1"</span>, <span class="st">"LOCID2"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="bisonpictools-getting-started_files/figure-html/unnamed-chunk-5-1.png" width="768"></p>
<p>Several age/sex classes can be combined to plot ratios of interest.
For example, the next code chunk plots the calf:(cow + calf) ratio.</p>
<p>The label for the ratio legend can be changed from the default
(“Ratio”), to more specific label, using the <code>ratio_name</code>
argument.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/bpt_plot_ratios.html">bpt_plot_ratios</a></span><span class="op">(</span></span>
<span>  <span class="va">event_data</span>,</span>
<span>  <span class="va">location_data</span>,</span>
<span>  numerator <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"f0"</span>, <span class="st">"m0"</span>, <span class="st">"u0"</span><span class="op">)</span>,</span>
<span>  denominator <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"fa"</span><span class="op">)</span>,</span>
<span>  ratio_name <span class="op">=</span> <span class="st">"calf:cow"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="bisonpictools-getting-started_files/figure-html/unnamed-chunk-6-1.png" width="768"></p>
</div>
</div>
<div class="section level3">
<h3 id="shinybisonpic">
<code>shinybisonpic</code><a class="anchor" aria-label="anchor" href="#shinybisonpic"></a>
</h3>
<p>The <a href="https://poissonconsulting.shinyapps.io/shinybisonpic" class="external-link"><code>shinybisonpic</code>
Shiny app</a> can be used to explore the locations of camera traps and
the the ratios of different classes of wood bison in camera trap
observations in a user-friendly manner. Refer to the <a href="https://poissonconsulting.github.io/bisonpicsuite/articles/bisonpic-user-guide.html" class="external-link">user
guide</a> for more information on how to use the
<code>shinybisonpic</code> app.</p>
</div>
</div>
<div class="section level2">
<h2 id="data-analysis">Data Analysis<a class="anchor" aria-label="anchor" href="#data-analysis"></a>
</h2>
<div class="section level3">
<h3 id="using-the-rstudio-console-1">Using the RStudio Console<a class="anchor" aria-label="anchor" href="#using-the-rstudio-console-1"></a>
</h3>
<div class="section level4">
<h4 id="read-in-data-from-the-populated-excel-template-1">(1) Read in data from the populated excel template<a class="anchor" aria-label="anchor" href="#read-in-data-from-the-populated-excel-template-1"></a>
</h4>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Change `dir` to the file path of the populated excel template on your computer</span></span>
<span><span class="va">dir</span> <span class="op">&lt;-</span> <span class="st">"myfilepath.xlsx"</span></span>
<span><span class="co"># Install readxl to read the excel spreadsheet into R</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"readxl"</span><span class="op">)</span></span>
<span><span class="co"># Read each sheet into R</span></span>
<span><span class="va">location_data</span> <span class="op">&lt;-</span> <span class="fu">readxl</span><span class="fu">::</span><span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html" class="external-link">read_xlsx</a></span><span class="op">(</span><span class="va">dir</span>, sheet <span class="op">=</span> <span class="st">"location"</span><span class="op">)</span></span>
<span><span class="va">event_data</span> <span class="op">&lt;-</span> <span class="fu">readxl</span><span class="fu">::</span><span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html" class="external-link">read_xlsx</a></span><span class="op">(</span><span class="va">dir</span>, sheet <span class="op">=</span> <span class="st">"event"</span><span class="op">)</span></span>
<span><span class="va">census_data</span> <span class="op">&lt;-</span> <span class="fu">readxl</span><span class="fu">::</span><span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html" class="external-link">read_xlsx</a></span><span class="op">(</span><span class="va">dir</span>, sheet <span class="op">=</span> <span class="st">"census"</span><span class="op">)</span></span>
<span><span class="va">proportion_calf_data</span> <span class="op">&lt;-</span> <span class="fu">readxl</span><span class="fu">::</span><span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html" class="external-link">read_xlsx</a></span><span class="op">(</span><span class="va">dir</span>, sheet <span class="op">=</span> <span class="st">"proportion_calf"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="run-the-analysis">(2) Run the analysis<a class="anchor" aria-label="anchor" href="#run-the-analysis"></a>
</h4>
<p>This uses the <code><a href="../reference/bpt_analyse.html">bpt_analyse()</a></code> function. Data checks are
completed before the analysis is run to ensure they are in the correct
format. Informative error messages will print to the console if the data
do not follow the required format. The following arguments control the
number of MCMC chains, number of iterations, and the thinning rate of
the model:</p>
<ul>
<li>
<code>analysis_mode</code> controls the number of iterations and
chains in the model run:
<ul>
<li>
<code>"debug"</code> is used for printing out the errors if the
model does not sample (10 iterations from 2 chains),</li>
<li>
<code>"quick"</code> is used for running through a quick run of the
model for demonstration purposes (10 iterations from 2 chains),</li>
<li>
<code>"report"</code> is the default and is used for the full
analysis (500 iterations from 3 chains).</li>
</ul>
</li>
<li>
<code>nthin</code> controls the thinning of the MCMC samples:
<ul>
<li>
<code>nthin = 1L</code> saves every sample; use this for
<code>"debug"</code> and <code>"quick"</code> modes,</li>
<li>
<code>nthin = 10L</code> saves every
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mn>10</mn><mrow><mi>t</mi><mi>h</mi></mrow></msup><annotation encoding="application/x-tex">10^{th}</annotation></semantics></math>
sample, and is the detault; use this for <code>"report"</code>
mode,</li>
<li>increase <code>nthin</code> by 5 if the model does not converge in
“report” mode.</li>
</ul>
</li>
</ul>
<p>It is recommended to:</p>
<ol style="list-style-type: decimal">
<li>Run the model in <code>analysis_mode = "quick"</code> mode with a
thinning rate of <code>nthin = 1L</code> to ensure the model samples
correctly.</li>
<li>If there were no errors in step 1, proceed by running the model in
<code>analysis_mode = "report"</code> with a thinning rate of
<code>nthin = 10L</code>, to achieve convergence. Ensure the table
output by the model has <code>TRUE</code> in the “converged” column. If
the model did not converge, increase <code>nthin</code> by 5, and re-run
the model.</li>
<li>If there were errors in step 1, proceed instead by running the model
in <code>analysis_mode = "debug"</code> with a thinning rate of
<code>nthin = 1L</code> to print informative error messages.</li>
</ol>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Start by running once on "quick" mode, with a thinning rate of 1</span></span>
<span><span class="va">analysis</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/bpt_analyse.html">bpt_analyse</a></span><span class="op">(</span></span>
<span>  event_data <span class="op">=</span> <span class="va">event_data</span>,</span>
<span>  location_data <span class="op">=</span> <span class="va">location_data</span>,</span>
<span>  census_data <span class="op">=</span> <span class="va">census_data</span>,</span>
<span>  proportion_calf_data <span class="op">=</span> <span class="va">proportion_calf_data</span>,</span>
<span>  nthin <span class="op">=</span> <span class="fl">1L</span>,</span>
<span>  analysis_mode <span class="op">=</span> <span class="st">"quick"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># If no errors appear, run the model on "report" mode, with a thinning rate of 10</span></span>
<span><span class="va">analysis</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/bpt_analyse.html">bpt_analyse</a></span><span class="op">(</span></span>
<span>  event_data <span class="op">=</span> <span class="va">event_data</span>,</span>
<span>  location_data <span class="op">=</span> <span class="va">location_data</span>,</span>
<span>  census_data <span class="op">=</span> <span class="va">census_data</span>,</span>
<span>  proportion_calf_data <span class="op">=</span> <span class="va">proportion_calf_data</span>,</span>
<span>  nthin <span class="op">=</span> <span class="fl">10L</span>,</span>
<span>  analysis_mode <span class="op">=</span> <span class="st">"report"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># If errors do appear, run the model on "debug" mode, which will provide</span></span>
<span><span class="co"># informative error messages</span></span>
<span><span class="va">analysis</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/bpt_analyse.html">bpt_analyse</a></span><span class="op">(</span></span>
<span>  event_data <span class="op">=</span> <span class="va">event_data</span>,</span>
<span>  location_data <span class="op">=</span> <span class="va">location_data</span>,</span>
<span>  census_data <span class="op">=</span> <span class="va">census_data</span>,</span>
<span>  proportion_calf_data <span class="op">=</span> <span class="va">proportion_calf_data</span>,</span>
<span>  nthin <span class="op">=</span> <span class="fl">1L</span>,</span>
<span>  analysis_mode <span class="op">=</span> <span class="st">"debug"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="check-that-the-model-converged">(3) Check that the model converged<a class="anchor" aria-label="anchor" href="#check-that-the-model-converged"></a>
</h4>
<p>In <code>"quick"</code> or <code>"debug"</code> mode, convergence is
not expected. In <code>"report"</code> mode, convergence is expected.
See the <code>converged</code> column in the table printed after
<code><a href="../reference/bpt_analyse.html">bpt_analyse()</a></code> is run to assess whether or not the analysis
converged. If it says <code>TRUE</code>, the model converged. If it says
<code>FALSE</code>, the model did not converge.</p>
<p>This is an example of a model run in “quick” mode that did not
converge (i.e., the “converged” column reads <code>FALSE</code>).</p>
<pre><code><span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 8</span></span></span>
<span><span class="co">#&gt;       n     K nchains niters nthin   ess  rhat converged</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>    11    57       2     10     1     7  1.97 FALSE</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="coefficient-table">(4) Coefficient table<a class="anchor" aria-label="anchor" href="#coefficient-table"></a>
</h4>
<p>Use the <code><a href="../reference/bpt_coefficient_table.html">bpt_coefficient_table()</a></code> function to print out
the estimated parameters from the model run.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">coef</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/bpt_coefficient_table.html">bpt_coefficient_table</a></span><span class="op">(</span><span class="va">analysis</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">coef</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 57 × 5</span></span></span>
<span><span class="co">#&gt;    term                           estimate    lower  upper svalue</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;term&gt;</span>                            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> bEtaSummerFall                    0.232  0.009<span style="text-decoration: underline;">55</span>  0.753  4.39 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> bEtaWin                           0.101  0.001<span style="text-decoration: underline;">14</span>  0.484  4.39 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> bFecundityReproductiveFA          1.94   1.63     2.69   4.39 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> bInitialMortalityCalfAnnual[1]   -<span style="color: #BB0000;">3.75</span>  -<span style="color: #BB0000;">5.78</span>    -<span style="color: #BB0000;">2.12</span>   4.39 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> bInitialMortalityCalfAnnual[2]   -<span style="color: #BB0000;">4.56</span>  -<span style="color: #BB0000;">7.45</span>    -<span style="color: #BB0000;">2.35</span>   4.39 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> bInitialMortalityCalfAnnual[3]   -<span style="color: #BB0000;">2.87</span>  -<span style="color: #BB0000;">7.46</span>    -<span style="color: #BB0000;">1.60</span>   4.39 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> bInitialMortalityCalfAnnual[4]   -<span style="color: #BB0000;">1.09</span>  -<span style="color: #BB0000;">6.11</span>     3.64   0.485</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> bKmWeekSummerFall                 2.22   0.266    4.42   4.39 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> bKmWeekWin                        1.93   1.21     2.63   4.39 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> bMAProportion[1]                  0.440  0.258    0.582  4.39 </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 47 more rows</span></span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="save-the-analysis-object">(5) Save the analysis object<a class="anchor" aria-label="anchor" href="#save-the-analysis-object"></a>
</h4>
<p>Ensure that the analysis object is saved once the model finishes
running. The <code><a href="../reference/bpt_save_analysis.html">bpt_save_analysis()</a></code> function saves the
analysis to the desired file path.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Save the analysis object.</span></span>
<span><span class="co"># Change the file path to the desired directory (does not require a file extension)</span></span>
<span><span class="fu"><a href="../reference/bpt_save_analysis.html">bpt_save_analysis</a></span><span class="op">(</span><span class="va">analysis</span>, file <span class="op">=</span> <span class="st">"file_path/analysis"</span><span class="op">)</span></span></code></pre></div>
<p>To load the analysis object back into R, use the complimentary
function, <code><a href="../reference/bpt_load_analysis.html">bpt_load_analysis()</a></code>, using the same file path it
was saved to above.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load analysis object if not still in the environment, using the same file path</span></span>
<span><span class="co"># it was saved to in step (4) above.</span></span>
<span><span class="va">analysis</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/bpt_load_analysis.html">bpt_load_analysis</a></span><span class="op">(</span><span class="st">"file_path/analysis"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="make-predictions">(6) Make predictions<a class="anchor" aria-label="anchor" href="#make-predictions"></a>
</h4>
<p>Predictions of the stage-wise and total abundances, survival and
fecundity rates, and select ratios are derived from the posterior
distributions of the estimated parameters. Use the functions with the
<code>bpt_predict</code> prefix to generate the predictions.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Predict total abundance</span></span>
<span><span class="fu"><a href="../reference/bpt_predict_abundance_total.html">bpt_predict_abundance_total</a></span><span class="op">(</span><span class="va">analysis</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 4 × 4</span></span></span>
<span><span class="co">#&gt;   annual    estimate lower upper</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2018-2019     211.  182.  244.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2019-2020     225.  205.  252.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2020-2021     254.  230.  280.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2021-2022     295.  258.  311.</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Predicts abundance by class:</span></span>
<span><span class="fu"><a href="../reference/bpt_predict_abundance_class.html">bpt_predict_abundance_class</a></span><span class="op">(</span><span class="va">analysis</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 32 × 5</span></span></span>
<span><span class="co">#&gt;    annual    class estimate lower upper</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2018-2019 F0        41.3 27.8   63.3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2019-2020 F0        32.6 26.2   36.9</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2020-2021 F0        40.9 35.3   43.0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2021-2022 F0        44.4 35.0   47.6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2018-2019 F1        17.0  6.53  43.2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2019-2020 F1        20.1 12.4   31.6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2020-2021 F1        17.7  8.95  23.2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2021-2022 F1        25.0 20.2   30.2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2018-2019 FA        64.0 51.8   82.0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2019-2020 FA        80.6 65.1   91.5</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 22 more rows</span></span></span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Predicts survival rates by class:</span></span>
<span><span class="fu"><a href="../reference/bpt_predict_survival.html">bpt_predict_survival</a></span><span class="op">(</span><span class="va">analysis</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 24 × 5</span></span></span>
<span><span class="co">#&gt;    annual    class estimate  lower upper</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2018-2019 F0       0.460 0.366  0.648</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2019-2020 F0       0.510 0.312  0.682</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2020-2021 F0       0.587 0.469  0.701</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2021-2022 F0       0.324 0.014<span style="text-decoration: underline;">6</span> 0.635</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2018-2019 M0       0.445 0.196  0.679</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2019-2020 M0       0.570 0.414  0.760</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2020-2021 M0       0.507 0.406  0.643</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2021-2022 M0       0.364 0.017<span style="text-decoration: underline;">4</span> 0.677</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2018-2019 F1       0.873 0.679  0.932</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2019-2020 F1       0.850 0.726  0.919</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 14 more rows</span></span></span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Predicts fecundity rate and proportion of reproductive cows:</span></span>
<span><span class="fu"><a href="../reference/bpt_predict_fecundity.html">bpt_predict_fecundity</a></span><span class="op">(</span><span class="va">analysis</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 4</span></span></span>
<span><span class="co">#&gt;   rate                            estimate lower upper</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Fecundity                          0.875 0.836 0.936</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Proportion of Reproductive Cows    0.965 0.888 0.996</span></span></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Predicts population ratios:</span></span>
<span><span class="fu"><a href="../reference/bpt_predict_ratios.html">bpt_predict_ratios</a></span><span class="op">(</span><span class="va">analysis</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 28 × 5</span></span></span>
<span><span class="co">#&gt;    annual    ratio   estimate lower upper</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2018-2019 M0:F0      0.802 0.384 1.35 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2019-2020 M0:F0      1.13  0.895 1.63 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2020-2021 M0:F0      0.847 0.647 1.26 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2021-2022 M0:F0      1.12  0.668 2.40 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2018-2019 M1:F1      1.14  0.439 3.28 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2019-2020 M1:F1      0.771 0.393 1.28 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2020-2021 M1:F1      1.08  0.938 1.72 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2021-2022 M1:F1      0.935 0.523 1.45 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2018-2019 Calf:FA    0.590 0.367 0.758</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2019-2020 Calf:FA    0.464 0.297 0.591</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 18 more rows</span></span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="plot-predictions">(7) Plot Predictions<a class="anchor" aria-label="anchor" href="#plot-predictions"></a>
</h4>
<p>The <code><a href="../reference/bpt_plot_predictions.html">bpt_plot_predictions()</a></code> function can be used to
visualize the predictions.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Plot predicted abundances by class</span></span>
<span><span class="fu"><a href="../reference/bpt_plot_predictions.html">bpt_plot_predictions</a></span><span class="op">(</span><span class="va">analysis</span>, prediction <span class="op">=</span> <span class="st">"abundance-class"</span><span class="op">)</span></span></code></pre></div>
<p><img src="bisonpictools-getting-started_files/figure-html/unnamed-chunk-19-1.png" width="672"></p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Plot total abundance</span></span>
<span><span class="fu"><a href="../reference/bpt_plot_predictions.html">bpt_plot_predictions</a></span><span class="op">(</span><span class="va">analysis</span>, prediction <span class="op">=</span> <span class="st">"abundance-total"</span><span class="op">)</span></span></code></pre></div>
<p><img src="bisonpictools-getting-started_files/figure-html/unnamed-chunk-20-1.png" width="672"></p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Plot survival rates</span></span>
<span><span class="fu"><a href="../reference/bpt_plot_predictions.html">bpt_plot_predictions</a></span><span class="op">(</span><span class="va">analysis</span>, prediction <span class="op">=</span> <span class="st">"survival"</span><span class="op">)</span></span></code></pre></div>
<p><img src="bisonpictools-getting-started_files/figure-html/unnamed-chunk-21-1.png" width="672"></p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Plot fecundity rates</span></span>
<span><span class="fu"><a href="../reference/bpt_plot_predictions.html">bpt_plot_predictions</a></span><span class="op">(</span><span class="va">analysis</span>, prediction <span class="op">=</span> <span class="st">"fecundity"</span><span class="op">)</span></span></code></pre></div>
<p><img src="bisonpictools-getting-started_files/figure-html/unnamed-chunk-22-1.png" width="672"></p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Plot ratios</span></span>
<span><span class="fu"><a href="../reference/bpt_plot_predictions.html">bpt_plot_predictions</a></span><span class="op">(</span><span class="va">analysis</span>, prediction <span class="op">=</span> <span class="st">"ratios"</span><span class="op">)</span></span></code></pre></div>
<p><img src="bisonpictools-getting-started_files/figure-html/unnamed-chunk-23-1.png" width="672"></p>
</div>
</div>
<div class="section level3">
<h3 id="runbisonpic">
<code>runbisonpic</code><a class="anchor" aria-label="anchor" href="#runbisonpic"></a>
</h3>
<p>Alternatively, launch the local data analysis app by running the
following lines of code in the RStudio console.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install `runbisonpic`</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"poissonconsulting/runbisonpic"</span><span class="op">)</span></span>
<span><span class="co"># Launch local app</span></span>
<span><span class="fu">runbisonpic</span><span class="fu">::</span><span class="fu"><a href="https://poissonconsulting.github.io/runbisonpic/reference/launch_runbisonpic.html" class="external-link">launch_runbisonpic</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>See the <a href="https://poissonconsulting.github.io/bisonpicsuite/articles/bisonpic-user-guide.html" class="external-link">user
guide</a> for more guidance on how to use the <code>runbisonpic</code>
app.</p>
</div>
</div>
<div class="section level2">
<h2 id="going-beyond-bisonpictools">Going beyond <code>bisonpictools</code><a class="anchor" aria-label="anchor" href="#going-beyond-bisonpictools"></a>
</h2>
<p>The analysis object is a list that contains the model code, mcmc
samples (class <code>mcmcr</code>), and other meta-data used to fit the
model. The user can interact directly with the mcmc samples using
packages such as <a href="https://github.com/poissonconsulting/mcmcr" class="external-link"><code>mcmcr</code></a>
and <a href="https://github.com/poissonconsulting/mcmcderive" class="external-link"><code>mcmcderive</code></a>
to derive other quantities of interest.</p>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-wickham_r_2016" class="csl-entry">
Wickham, Hadley, and Garrett Grolemund. 2016. <em>R for Data Science:
Import, Tidy, Transform, Visualize, and Model Data</em>. First edition.
Sebastopol, CA: O’Reilly. <a href="https://r4ds.had.co.nz" class="external-link">https://r4ds.had.co.nz</a>.
</div>
</div>
</div>
<div class="section level2">
<h2 id="licensing">Licensing<a class="anchor" aria-label="anchor" href="#licensing"></a>
</h2>
<p>Copyright 2023 Province of Alberta</p>
<p>Licensed under the Apache License, Version 2.0 (the “License”); you
may not use this file except in compliance with the License. You may
obtain a copy of the License at</p>
<p><a href="http://www.apache.org/licenses/LICENSE-2.0" class="external-link uri">http://www.apache.org/licenses/LICENSE-2.0</a></p>
<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an “AS IS” BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Nicole Hill, Andrea Kortello, Ayla Pearson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
